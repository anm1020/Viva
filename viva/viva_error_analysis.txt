================================================================================
                                VIVA í”„ë¡œì íŠ¸ ì˜¤ë¥˜ ë¶„ì„ ë° ì£¼ìš” ê¸°ëŠ¥ ì •ë¦¬
================================================================================

ğŸ“‹ ëª©ì°¨
1. ì˜¤ë¥˜ ë¶„ì„ ë° í•´ê²° ë°©ì•ˆ
2. ì£¼ìš” ê¸°ëŠ¥ ì½”ë“œ ì •ë¦¬
3. ê²°ë¡ 

================================================================================
ğŸ” 1. ì˜¤ë¥˜ ë¶„ì„ ë° í•´ê²° ë°©ì•ˆ
================================================================================

### 1-1. Spring Security ì¸ì¦ ì˜¤ë¥˜

**1. ì˜¤ë¥˜ ì‚¬ìœ **
- Spring Security ì„¤ì •ì—ì„œ CustomUserDetailsService êµ¬í˜„ ì‹œ UserDetails ë°˜í™˜ íƒ€ì… ë¶ˆì¼ì¹˜
- ë¹„ë°€ë²ˆí˜¸ ì¸ì½”ë” ì„¤ì • ë¬¸ì œ (NoOpPasswordEncoder ì‚¬ìš©)
- OAuth2 ì†Œì…œ ë¡œê·¸ì¸ê³¼ ì¼ë°˜ ë¡œê·¸ì¸ í†µí•© ì‹œ Principal íƒ€ì… ë¶ˆì¼ì¹˜

**2. ì˜¤ë¥˜ ì½”ë“œ**
```java
// SecurityConfig.java - 84ë²ˆì§¸ ì¤„ ê·¼ì²˜
.oauth2Login(oauth2 -> oauth2
    .loginPage("/loginmain")
    .defaultSuccessUrl("/main?loginSuccess=true", true)
)
```

**3. í•´ê²° ë°©ì•ˆ**
```java
// CustomUserDetailsService.java - ìˆ˜ì •ëœ ì½”ë“œ
@Override
public UserDetails loadUserByUsername(String userId) throws UsernameNotFoundException {
    Users users = usersRepository.findByUserId(userId);
    if(users == null || "N".equals(users.getUserType())) {
        throw new UsernameNotFoundException("ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.");
    }
    return new CustomUserDetails(users);  // CustomUserDetails ì‚¬ìš©
}
```

**4. ê²°ë¡ **
- CustomUserDetails í´ë˜ìŠ¤ êµ¬í˜„ìœ¼ë¡œ UserDetails ì¸í„°í˜ì´ìŠ¤ ì •ìƒ êµ¬í˜„
- ë¹„ë°€ë²ˆí˜¸ ì¸ì½”ë”ëŠ” ê°œë°œí™˜ê²½ì—ì„œ NoOp, ìš´ì˜í™˜ê²½ì—ì„œ BCrypt ì‚¬ìš© ê¶Œì¥
- Principal íƒ€ì… ì²´í¬ë¡œ ì¼ë°˜/ì†Œì…œ ë¡œê·¸ì¸ êµ¬ë¶„ ì²˜ë¦¬

### 1-2. AI API í˜¸ì¶œ ì˜¤ë¥˜

**1. ì˜¤ë¥˜ ì‚¬ìœ **
- OpenAI API í‚¤ ì„¤ì • ëˆ„ë½
- API ì‘ë‹µ êµ¬ì¡° íŒŒì‹± ì˜¤ë¥˜
- ì˜ˆì™¸ ì²˜ë¦¬ ë¯¸í¡ìœ¼ë¡œ ì¸í•œ ì„œë²„ ì˜¤ë¥˜

**2. ì˜¤ë¥˜ ì½”ë“œ**
```java
// AIService.java - 42ë²ˆì§¸ ì¤„ ê·¼ì²˜
try {
    ResponseEntity<Map> response = restTemplate.postForEntity(
        AIConfig.getApiUrl(), request, Map.class
    );
    // API ì‘ë‹µ íŒŒì‹± ì˜¤ë¥˜ ë°œìƒ
} catch (Exception e) {
    e.printStackTrace();
    return "ì˜¤ë¥˜ ë°œìƒ: " + e.getMessage();
}
```

**3. í•´ê²° ë°©ì•ˆ**
```java
// AIController.java - ê°œì„ ëœ ì˜ˆì™¸ ì²˜ë¦¬
@PostMapping("/sendAndReply")
public ResponseEntity<Map<String, AiMessage>> sendAndReply(@RequestBody AiRequestDTO request) {
    try {
        Map<String, AiMessage> result = aiMessageService.sendAndReply(request.getSessionId(), request.getPrompt());
        return ResponseEntity.ok(result);
    } catch (Exception e) {
        e.printStackTrace();
        // ì˜¤ë¥˜ ë°œìƒ ì‹œ ê¸°ë³¸ ì‘ë‹µ ìƒì„±
        AiMessage errorMessage = AiMessage.builder()
                .sessionId(request.getSessionId())
                .role("assistant")
                .content("ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage())
                .createdDt(java.time.LocalDateTime.now().toString())
                .build();
        
        Map<String, AiMessage> errorResult = Map.of(
                "userMessage", new AiMessage(),
                "assistantMessage", errorMessage
        );
        return ResponseEntity.ok(errorResult);
    }
}
```

**4. ê²°ë¡ **
- application-secret.properties íŒŒì¼ì— OpenAI API í‚¤ ì„¤ì • í•„ìˆ˜
- API ì‘ë‹µ êµ¬ì¡°ì— ë§ëŠ” ì•ˆì „í•œ íŒŒì‹± ë¡œì§ êµ¬í˜„
- ì˜ˆì™¸ ë°œìƒ ì‹œì—ë„ ì‚¬ìš©ìì—ê²Œ ì ì ˆí•œ ì‘ë‹µ ì œê³µ

### 1-3. ë°ì´í„°ë² ì´ìŠ¤ ì—°ê²° ì˜¤ë¥˜

**1. ì˜¤ë¥˜ ì‚¬ìœ **
- JPA ì—”í‹°í‹° ë§¤í•‘ ì˜¤ë¥˜
- ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆ ë¶ˆì¼ì¹˜
- íŠ¸ëœì­ì…˜ ê´€ë¦¬ ë¬¸ì œ

**2. ì˜¤ë¥˜ ì½”ë“œ**
```java
// UserController.java - íšŒì›ê°€ì… ì‹œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜
@PostMapping("memberinsert")
public String memberinsert(@ModelAttribute Users users, ...) {
    try {
        service.save(users);
        return "redirect:/loginmain";
    } catch (Exception e) {
        rttr.addFlashAttribute("registerFailMsg", "íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
        return "redirect:/memberform?role=" + users.getUserRole();
    }
}
```

**3. í•´ê²° ë°©ì•ˆ**
```java
// UserService.java - ê°œì„ ëœ ì¤‘ë³µ ì²´í¬
public void registerUser(Users users) {
    if (usersRepository.existsById(users.getUserId())) {
        throw new IllegalArgumentException("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””ì…ë‹ˆë‹¤.");
    }
    usersRepository.save(users);
}
```

**4. ê²°ë¡ **
- ì—”í‹°í‹° í´ë˜ìŠ¤ì— @Entity, @Id ì–´ë…¸í…Œì´ì…˜ ì •í™•íˆ ì„¤ì •
- ë°ì´í„°ë² ì´ìŠ¤ ìŠ¤í‚¤ë§ˆì™€ ì—”í‹°í‹° í•„ë“œëª… ì¼ì¹˜ í™•ì¸
- @Transactional ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ íŠ¸ëœì­ì…˜ ê´€ë¦¬

### 1-4. ì„¸ì…˜ ê´€ë¦¬ ì˜¤ë¥˜

**1. ì˜¤ë¥˜ ì‚¬ìœ **
- HttpSessionê³¼ Spring Security ì„¸ì…˜ ë¶ˆì¼ì¹˜
- ì„¸ì…˜ ì†ì„± ì ‘ê·¼ ì˜¤ë¥˜
- ë¡œê·¸ì¸ ìƒíƒœ ì²´í¬ ë¡œì§ ì˜¤ë¥˜

**2. ì˜¤ë¥˜ ì½”ë“œ**
```java
// AiVoiceController.java - ì„¸ì…˜ ì ‘ê·¼ ì˜¤ë¥˜
@PostMapping("/ai/voice/save")
public String saveVoice(@RequestBody AiVoiceDTO dto, HttpSession session) {
    String userId = (String) session.getAttribute("loginId"); // null ë°˜í™˜ ê°€ëŠ¥
    if (userId == null) return "ë¡œê·¸ì¸ í•„ìš”";
    // ...
}
```

**3. í•´ê²° ë°©ì•ˆ**
```java
// Principal ì‚¬ìš©ìœ¼ë¡œ ê°œì„ 
@PostMapping("/ai/voice/save")
public String saveVoice(@RequestBody AiVoiceDTO dto, Principal principal) {
    if (principal == null) return "ë¡œê·¸ì¸ í•„ìš”";
    String userId = principal.getName();
    aiVoiceService.saveVoiceFeedback(userId, dto);
    return "ok";
}
```

**4. ê²°ë¡ **
- Spring Securityì˜ Principal ê°ì²´ ì‚¬ìš© ê¶Œì¥
- ì„¸ì…˜ ëŒ€ì‹  SecurityContextHolder í™œìš©
- ë¡œê·¸ì¸ ìƒíƒœ ì²´í¬ëŠ” Spring Securityì˜ ì¸ì¦ ê°ì²´ í™œìš©

### 1-5. íŒŒì¼ ì—…ë¡œë“œ ì˜¤ë¥˜

**1. ì˜¤ë¥˜ ì‚¬ìœ **
- MultipartFile ì²˜ë¦¬ ì˜¤ë¥˜
- íŒŒì¼ í¬ê¸° ì œí•œ ì„¤ì • ë¬¸ì œ
- íŒŒì¼ í˜•ì‹ ê²€ì¦ ëˆ„ë½

**2. ì˜¤ë¥˜ ì½”ë“œ**
```java
// AiVoiceController.java - íŒŒì¼ ì—…ë¡œë“œ ì˜¤ë¥˜
@PostMapping("/ai/voice/transcribe")
public ResponseEntity<Map<String, String>> transcribeVoice(@RequestParam("file") MultipartFile file) {
    try {
        String text = aiVoiceService.transcribe(file);
        return ResponseEntity.ok(Map.of("text", text));
    } catch (Exception e) {
        e.printStackTrace();
        return ResponseEntity.status(500).body(Map.of("error", "ìŒì„± ë³€í™˜ ì‹¤íŒ¨: " + e.getMessage()));
    }
}
```

**3. í•´ê²° ë°©ì•ˆ**
```java
// íŒŒì¼ ê²€ì¦ ì¶”ê°€
@PostMapping("/ai/voice/transcribe")
public ResponseEntity<Map<String, String>> transcribeVoice(@RequestParam("file") MultipartFile file) {
    try {
        // íŒŒì¼ ê²€ì¦
        if (file.isEmpty()) {
            return ResponseEntity.badRequest().body(Map.of("error", "íŒŒì¼ì´ ë¹„ì–´ìˆìŠµë‹ˆë‹¤."));
        }
        
        // íŒŒì¼ í˜•ì‹ ê²€ì¦
        String contentType = file.getContentType();
        if (contentType == null || !contentType.startsWith("audio/")) {
            return ResponseEntity.badRequest().body(Map.of("error", "ì˜¤ë””ì˜¤ íŒŒì¼ë§Œ ì—…ë¡œë“œ ê°€ëŠ¥í•©ë‹ˆë‹¤."));
        }
        
        String text = aiVoiceService.transcribe(file);
        return ResponseEntity.ok(Map.of("text", text));
    } catch (Exception e) {
        e.printStackTrace();
        return ResponseEntity.status(500).body(Map.of("error", "ìŒì„± ë³€í™˜ ì‹¤íŒ¨: " + e.getMessage()));
    }
}
```

**4. ê²°ë¡ **
- application.propertiesì— íŒŒì¼ ì—…ë¡œë“œ ì„¤ì • ì¶”ê°€
- íŒŒì¼ í˜•ì‹ ë° í¬ê¸° ê²€ì¦ ë¡œì§ êµ¬í˜„
- ì ì ˆí•œ ì˜ˆì™¸ ì²˜ë¦¬ë¡œ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

================================================================================
ğŸ¯ 2. ì£¼ìš” ê¸°ëŠ¥ ì½”ë“œ ì •ë¦¬
================================================================================

### 2-1. AI ì±„íŒ… ê¸°ëŠ¥

**1. ì½”ë“œ ê¸°ëŠ¥ ì„¤ëª…**
- OpenAI GPT APIë¥¼ í™œìš©í•œ ì‹¤ì‹œê°„ ì±„íŒ…
- ì„¸ì…˜ ê¸°ë°˜ ëŒ€í™” ê´€ë¦¬
- ìë™ ìš”ì•½ ê¸°ëŠ¥
- ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ ì €ì¥

**2. ì½”ë“œ ë³´ì—¬ì£¼ê¸°**
```java
// AIController.java - AI ì±„íŒ… í˜ì´ì§€
@GetMapping("/aichat")
public String chatPage(
    @RequestParam(value = "sessionId", required = false) String sessionId,
    @RequestParam(value = "new", required = false) String isNew,
    HttpSession httpSession, Principal principal, Model model) {
    
    String userId = null;
    if (principal != null) {
        userId = principal.getName();
    }

    // ìƒˆ ì„¸ì…˜ ìƒì„± ë¡œì§
    if ("1".equals(isNew) && userId != null) {
        sessionId = UUID.randomUUID().toString();
        AiSession newSession = AiSession.builder()
            .sessionId(sessionId)
            .userId(userId)
            .title("ìƒˆë¡œìš´ ëŒ€í™”")
            .createdDt(java.time.LocalDateTime.now().toString())
            .build();
        aiSessionService.saveSession(newSession);
    }

    List<AiMessage> messages = aiMessageService.getMessagesBySessionId(sessionId);
    model.addAttribute("messages", messages);
    model.addAttribute("sessionId", sessionId);
    
    return "Ai/aichat";
}

// AI ë©”ì‹œì§€ ì „ì†¡ ë° ì‘ë‹µ
@PostMapping("/sendAndReply")
public ResponseEntity<Map<String, AiMessage>> sendAndReply(@RequestBody AiRequestDTO request) {
    try {
        Map<String, AiMessage> result = aiMessageService.sendAndReply(request.getSessionId(), request.getPrompt());
        return ResponseEntity.ok(result);
    } catch (Exception e) {
        // ì˜¤ë¥˜ ì²˜ë¦¬
        AiMessage errorMessage = AiMessage.builder()
                .sessionId(request.getSessionId())
                .role("assistant")
                .content("ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: " + e.getMessage())
                .createdDt(java.time.LocalDateTime.now().toString())
                .build();
        
        Map<String, AiMessage> errorResult = Map.of(
                "userMessage", new AiMessage(),
                "assistantMessage", errorMessage
        );
        return ResponseEntity.ok(errorResult);
    }
}
```

**3. ê²°ë¡ **
- ì„¸ì…˜ ê¸°ë°˜ìœ¼ë¡œ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
- ì‹¤ì‹œê°„ ì‘ë‹µê³¼ ì˜¤ë¥˜ ì²˜ë¦¬ êµ¬í˜„
- ì‚¬ìš©ìë³„ ëŒ€í™” íˆìŠ¤í† ë¦¬ ê´€ë¦¬

### 2-2. ìŒì„± ë©´ì ‘ ê¸°ëŠ¥

**1. ì½”ë“œ ê¸°ëŠ¥ ì„¤ëª…**
- Whisper APIë¥¼ í™œìš©í•œ ìŒì„± í…ìŠ¤íŠ¸ ë³€í™˜
- ìŒì„± íŒŒì¼ ì—…ë¡œë“œ ë° ì²˜ë¦¬
- ìŒì„± í”¼ë“œë°± ì €ì¥ ë° ì¡°íšŒ
- ì‹¤ì‹œê°„ ìŒì„± ë©´ì ‘ ì‹œë®¬ë ˆì´ì…˜

**2. ì½”ë“œ ë³´ì—¬ì£¼ê¸°**
```java
// AiVoiceController.java - ìŒì„± ë³€í™˜
@PostMapping("/ai/voice/transcribe")
@ResponseBody
public ResponseEntity<Map<String, String>> transcribeVoice(@RequestParam("file") MultipartFile file) {
    try {
        String text = aiVoiceService.transcribe(file);
        return ResponseEntity.ok(Map.of("text", text));
    } catch (Exception e) {
        e.printStackTrace();
        return ResponseEntity.status(500).body(Map.of("error", "ìŒì„± ë³€í™˜ ì‹¤íŒ¨: " + e.getMessage()));
    }
}

// AiVoiceService.java - Whisper API í˜¸ì¶œ
public String transcribe(MultipartFile file) {
    try {
        String url = "https://api.openai.com/v1/audio/transcriptions";

        ByteArrayResource resource = new ByteArrayResource(file.getBytes()) {
            @Override
            public String getFilename() {
                return file.getOriginalFilename();
            }
        };

        MultiValueMap<String, Object> body = new LinkedMultiValueMap<>();
        body.add("file", resource);
        body.add("model", "whisper-1");
        body.add("language", "ko");

        HttpHeaders headers = new HttpHeaders();
        headers.setContentType(MediaType.MULTIPART_FORM_DATA);
        headers.setBearerAuth(openAiApiKey);

        HttpEntity<MultiValueMap<String, Object>> request = new HttpEntity<>(body, headers);
        RestTemplate restTemplate = new RestTemplate();
        ResponseEntity<Map> response = restTemplate.postForEntity(url, request, Map.class);

        if (response.getStatusCode().is2xxSuccessful()) {
            return (String) response.getBody().get("text");
        } else {
            throw new RuntimeException("Whisper API í˜¸ì¶œ ì‹¤íŒ¨");
        }
    } catch (IOException e) {
        e.printStackTrace();
        throw new RuntimeException("Whisper ë³€í™˜ ì¤‘ ì˜¤ë¥˜: " + e.getMessage());
    }
}
```

**3. ê²°ë¡ **
- RESTful APIë¡œ ìŒì„± íŒŒì¼ ì²˜ë¦¬
- ë‹¤êµ­ì–´ ì§€ì› (í•œêµ­ì–´ ìš°ì„ )
- ì˜¤ë¥˜ ì²˜ë¦¬ë¡œ ì•ˆì •ì„± í™•ë³´

### 2-3. ë©´ì ‘ê´€ CRUD ê¸°ëŠ¥

**1. ì½”ë“œ ê¸°ëŠ¥ ì„¤ëª…**
- ë©´ì ‘ê´€ ë“±ë¡, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ
- ì¹´í…Œê³ ë¦¬ë³„ ë©´ì ‘ê´€ ê²€ìƒ‰
- ë©´ì ‘ê´€ ìƒì„¸ ì •ë³´ ë° ë¦¬ë·° ê´€ë¦¬
- ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´

**2. ì½”ë“œ ë³´ì—¬ì£¼ê¸°**
```java
// InterviewerController.java - ë©´ì ‘ê´€ ëª©ë¡
@GetMapping("/interviewer")
public String showIntrList(@RequestParam(value = "intrCate", required = false) String intrCate, Model model) {
    List<InterviewerDTO> interviewers;
    if (intrCate != null && !intrCate.isEmpty()) {
        // ì—¬ëŸ¬ ì¹´í…Œê³ ë¦¬(ì½¤ë§ˆêµ¬ë¶„) ê²€ìƒ‰ ì§€ì›
        String[] categories = intrCate.split(",");
        interviewers = new java.util.ArrayList<>();
        for (String cate : categories) {
            interviewers.addAll(interviewerService.getInterviewerListByCategory(cate));
        }
        // ì¤‘ë³µ ì œê±°
        interviewers = interviewers.stream().distinct().toList();
    } else {
        // ì „ì²´ ëª©ë¡
        interviewers = interviewerService.getInterviewerList();
    }
    if (interviewers == null) {
        interviewers = java.util.Collections.emptyList();
    }
    model.addAttribute("interviewers", interviewers);
    return "interviewer/List";
}

// ë©´ì ‘ê´€ ë“±ë¡ (ê¶Œí•œ ì²´í¬)
@GetMapping("/interviewer/form")
public String showForm(Principal principal, Model model) {
    String userId = principal.getName();
    Users user = usersRepository.findByUserId(userId);
    if (user == null || !"intr".equals(user.getUserRole())) {
        return "redirect:/interviewer?error=not_intr";
    }
    model.addAttribute("user", user);
    return "interviewer/form";
}

// ë©´ì ‘ê´€ ì €ì¥
@PostMapping("/interviewer/save")
public String saveInterviewer(Principal principal,
                              @RequestParam(name = "intrIntro", required = false) String intrIntro,
                              @RequestParam(name = "intrImage", required = false) String intrImage,
                              @RequestParam(name = "intrPrice", required = false) Integer intrPrice,
                              @RequestParam(name = "intrCate", required = false) String intrCate,
                              @RequestParam(name = "intrContent", required = false) String intrContent) {
    String userId = principal.getName();
    Users user = usersRepository.findByUserId(userId);
    if (user == null || !"intr".equals(user.getUserRole())) {
        return "redirect:/interviewer?error=not_intr";
    }
    
    Interviewer interviewer = new Interviewer();
    interviewer.setUserId(userId);
    interviewer.setIntrIntro(intrIntro);
    interviewer.setIntrImage(intrImage);
    interviewer.setIntrPrice(intrPrice);
    interviewer.setIntrCate(intrCate);
    interviewer.setIntrContent(intrContent);
    
    interviewerService.save(interviewer);
    return "redirect:/interviewer";
}
```

**3. ê²°ë¡ **
- ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ë¡œ ë³´ì•ˆ ê°•í™”
- ì¹´í…Œê³ ë¦¬ë³„ ê²€ìƒ‰ ê¸°ëŠ¥ìœ¼ë¡œ ì‚¬ìš©ì„± í–¥ìƒ
- DTO íŒ¨í„´ìœ¼ë¡œ ë°ì´í„° ì „ì†¡ ìµœì í™”

### 2-4. ìì†Œì„œ ê´€ë¦¬ ê¸°ëŠ¥

**1. ì½”ë“œ ê¸°ëŠ¥ ì„¤ëª…**
- ìì†Œì„œ ì‘ì„±, ì¡°íšŒ, ìˆ˜ì •, ì‚­ì œ
- AI ê¸°ë°˜ ìì†Œì„œ í”¼ë“œë°± ìƒì„±
- ì„¹ì…˜ë³„ ìì†Œì„œ êµ¬ì¡°í™”
- ì‚¬ìš©ìë³„ ìì†Œì„œ ëª©ë¡ ê´€ë¦¬

**2. ì½”ë“œ ë³´ì—¬ì£¼ê¸°**
```java
// JasoController.java - ìì†Œì„œ ëª©ë¡
@GetMapping("list")
public String listJaso(Principal principal, Model model) {
    String userId = principal.getName();
    List<Jaso> jasoList = jasoService.getJasoByUserId(userId);
    model.addAttribute("jasoList", jasoList);
    return "mypage/jasolist";
}

// ìì†Œì„œ ì €ì¥
@PostMapping("/write")
public String writeSubmit(@ModelAttribute Jaso jaso,
                         @RequestParam(value = "jaso_growth", required = false) String jasoGrowth,
                         @RequestParam(value = "jaso_personality", required = false) String jasoPersonality,
                         @RequestParam(value = "jaso_school", required = false) String jasoSchool,
                         @RequestParam(value = "jaso_motivation", required = false) String jasoMotivation,
                         @RequestParam(value = "jaso_future", required = false) String jasoFuture,
                         @RequestParam(value = "jaso_experience", required = false) String jasoExperience,
                         Principal principal) {
    String userId = principal.getName();
    jaso.setUserId(userId);
    jaso.setCreatedDt(LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")));
    jaso.setGrowth(jasoGrowth);
    jaso.setPersonality(jasoPersonality);
    jaso.setSchool(jasoSchool);
    jaso.setMotivation(jasoMotivation);
    jaso.setFuture(jasoFuture);
    jaso.setExperience(jasoExperience);
    
    try {
        Jaso savedJaso = jasoService.saveJaso(jaso);
    } catch (Exception e) {
        System.out.println("ì €ì¥ ì‹¤íŒ¨: " + e.getMessage());
        e.printStackTrace();
    }
    return "redirect:/mypage/jaso/list";
}

// AI í”¼ë“œë°± ìƒì„±
@PostMapping("/{id}/generate-feedback")
public String generateFeedback(@PathVariable("id") Long id, RedirectAttributes redirectAttributes) {
    try {
        Jaso jaso = jasoService.getJasoById(id);
        if (jaso == null) {
            redirectAttributes.addFlashAttribute("error", "ìì†Œì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
            return "redirect:/mypage/jaso/list";
        }

        // AI í”¼ë“œë°± ìƒì„±
        String feedback = aiService.generateJasoFeedback(jaso);
        
        JasoFeedback newFeedback = new JasoFeedback();
        newFeedback.setJasoId(id);
        newFeedback.setFeedback(feedback);
        newFeedback.setCreatedDt(LocalDateTime.now().format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")));
        
        jasofeedbackService.saveFeedback(newFeedback);
        redirectAttributes.addFlashAttribute("message", "AI í”¼ë“œë°±ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.");
    } catch (Exception e) {
        redirectAttributes.addFlashAttribute("error", "AI í”¼ë“œë°± ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.");
        e.printStackTrace();
    }
    return "redirect:/mypage/jaso/view/" + id;
}
```

**3. ê²°ë¡ **
- ì„¹ì…˜ë³„ êµ¬ì¡°í™”ë¡œ ì²´ê³„ì ì¸ ìì†Œì„œ ê´€ë¦¬
- AI í”¼ë“œë°±ìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜ í–¥ìƒ
- ì˜ˆì™¸ ì²˜ë¦¬ë¡œ ì•ˆì •ì„± í™•ë³´

### 2-5. ë©”ì¸ í˜ì´ì§€ ê¸°ëŠ¥

**1. ì½”ë“œ ê¸°ëŠ¥ ì„¤ëª…**
- ë¡œê·¸ì¸ ìƒíƒœì— ë”°ë¥¸ ë™ì  ì½˜í…ì¸  í‘œì‹œ
- ì¼ë°˜ ë¡œê·¸ì¸ê³¼ ì†Œì…œ ë¡œê·¸ì¸ í†µí•©
- ì‚¬ìš©ì ì—­í• ë³„ ë©”ë‰´ ë¶„ê¸°
- ì„¸ì…˜ ê´€ë¦¬ ë° ì¸ì¦ ìƒíƒœ í‘œì‹œ

**2. ì½”ë“œ ë³´ì—¬ì£¼ê¸°**
```java
// UserController.java - ë©”ì¸ í˜ì´ì§€
@GetMapping("/main")
public String main(Authentication authentication, Model model) {
    // 1. ì¸ì¦ ê°ì²´ ê°€ì ¸ì˜¤ê¸°
    Authentication auth = SecurityContextHolder.getContext().getAuthentication();

    String displayName = null;
    String role = null;

    // 2. ì¸ì¦ëê³  ìµëª…ìœ ì € ì•„ë‹ˆë©´
    if (auth != null && auth.isAuthenticated() && !"anonymousUser".equals(auth.getPrincipal())) {
        Object principal = auth.getPrincipal();

        // (1) ì¼ë°˜ ë¡œê·¸ì¸ (UserDetails)
        if (principal instanceof CustomUserDetails userDetails) {
            displayName = userDetails.getUsers().getUserName();
            role = userDetails.getUsers().getUserRole();
        }
        
        // (2) ì†Œì…œ ë¡œê·¸ì¸ (DefaultOAuth2User)
        else if (principal instanceof DefaultOAuth2User oauth2User) {
            Map<String, Object> attrs = oauth2User.getAttributes();
            if (attrs != null && attrs.containsKey("properties")) {
                Map<String, Object> props = (Map<String, Object>) attrs.get("properties");
                if (props != null && props.containsKey("nickname")) {
                    displayName = (String) props.get("nickname");
                }
            }
        }
    }

    model.addAttribute("displayName", displayName);
    model.addAttribute("role", role);

    return "main";
}

// ë§ˆì´í˜ì´ì§€ (ì—­í• ë³„ ë¶„ê¸°)
@GetMapping("/mypage")
public String mypage(Model model, Principal principal) {
    String userId = principal.getName();
    Users users = service.findByUserId(userId);
    model.addAttribute("users", users);

    // user_roleì— ë”°ë¼ ë‹¤ë¥¸ ë·° ë¦¬í„´
    if ("mem".equals(users.getUserRole())) {
        return "mypage/memMypage";      // ì·¨ì¤€ìƒ ë§ˆì´í˜ì´ì§€
    } else if ("intr".equals(users.getUserRole())) {
        return "mypage/intrMypage";     // ë©´ì ‘ê´€ ë§ˆì´í˜ì´ì§€
    } else {
        return "error/403"; // ê¶Œí•œ ì˜¤ë¥˜
    }
}
```

**3. ê²°ë¡ **
- Spring Security ì¸ì¦ ê°ì²´ í™œìš©ìœ¼ë¡œ ì•ˆì „í•œ ì‚¬ìš©ì ì •ë³´ ì ‘ê·¼
- ì¼ë°˜/ì†Œì…œ ë¡œê·¸ì¸ í†µí•© ì²˜ë¦¬
- ì—­í• ë³„ UI ë¶„ê¸°ë¡œ ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

### 2-6. ê²°ì œ ì‹œìŠ¤í…œ ê¸°ëŠ¥

**1. ì½”ë“œ ê¸°ëŠ¥ ì„¤ëª…**
- í¬íŠ¸ì› ê²°ì œ ì—°ë™
- ì˜ˆì•½ê³¼ ê²°ì œ ì—°ë™
- ê²°ì œ ìƒíƒœ ê´€ë¦¬
- ê²°ì œ ê²°ê³¼ ì²˜ë¦¬

**2. ì½”ë“œ ë³´ì—¬ì£¼ê¸°**
```java
// PaymentController.java - ê²°ì œ í˜ì´ì§€
@GetMapping("/charge")
public String showChargePage(
    @RequestParam("intrId") String intrId,
    @RequestParam("intrName") String intrName,
    @RequestParam("date") @DateTimeFormat(iso = DateTimeFormat.ISO.DATE) LocalDate date,
    @RequestParam("time") @DateTimeFormat(pattern = "HH:mm") LocalTime time,
    Model model
) {
    model.addAttribute("intrId", 1);
    model.addAttribute("intrName", intrName);
    model.addAttribute("reservedDate", date);
    model.addAttribute("reservedTime", time);
    model.addAttribute("amount", 100);
    return "payment/charge";
}

// ê²°ì œ ì €ì¥
@PostMapping("/save")
@ResponseBody
public Integer savePayment(@RequestBody Payment payment) {
    System.out.println("payment in: " + payment);
    service.savePayment(payment);
    return 1;
}

// PaymentService.java - ê²°ì œ ìƒíƒœ ê´€ë¦¬
@Transactional
public Payment preparePayment(Long resNo, BigDecimal amount) {
    Payment p = Payment.builder()
        .payResno(resNo.toString())
        .payAmount(amount)
        .payStatus(PayStatus.ready)
        .payCreateDt(LocalDateTime.now())
        .build();
    return repo.save(p);
}

@Transactional
public void confirmPayment(Long payId) {
    Payment p = repo.findById(payId)
        .orElseThrow(() -> new IllegalArgumentException("ì˜ëª»ëœ payId"));
    p.setPayStatus(PayStatus.paid);
    repo.save(p);
}
```

**3. ê²°ë¡ **
- í¬íŠ¸ì› API ì—°ë™ìœ¼ë¡œ ì•ˆì „í•œ ê²°ì œ ì²˜ë¦¬
- íŠ¸ëœì­ì…˜ ê´€ë¦¬ë¡œ ë°ì´í„° ì¼ê´€ì„± ë³´ì¥
- ê²°ì œ ìƒíƒœ ì¶”ì ìœ¼ë¡œ ê´€ë¦¬ íš¨ìœ¨ì„± í–¥ìƒ

================================================================================
ğŸ“Š 3. ê²°ë¡ 
================================================================================

### 3-1. ì£¼ìš” ì„±ê³¼

1. **AI ê¸°ëŠ¥ í†µí•© ì„±ê³µ**
   - OpenAI GPT API ì—°ë™ìœ¼ë¡œ ì‹¤ì‹œê°„ ì±„íŒ… êµ¬í˜„
   - Whisper APIë¡œ ìŒì„± ì¸ì‹ ê¸°ëŠ¥ êµ¬í˜„
   - AI ê¸°ë°˜ ìì†Œì„œ í”¼ë“œë°± ì‹œìŠ¤í…œ êµ¬ì¶•

2. **ë³´ì•ˆ ê°•í™”**
   - Spring Securityë¡œ ì¸ì¦/ì¸ê°€ ì‹œìŠ¤í…œ êµ¬ì¶•
   - OAuth2 ì†Œì…œ ë¡œê·¸ì¸ (ì¹´ì¹´ì˜¤) ì—°ë™
   - ì—­í•  ê¸°ë°˜ ì ‘ê·¼ ì œì–´ êµ¬í˜„

3. **ì‚¬ìš©ì ê²½í—˜ ê°œì„ **
   - ì§ê´€ì ì¸ UI/UX ì„¤ê³„
   - ì‹¤ì‹œê°„ ì‘ë‹µ ì²˜ë¦¬
   - ì˜¤ë¥˜ ìƒí™©ì— ëŒ€í•œ ì ì ˆí•œ í”¼ë“œë°±

### 3-2. ê¸°ìˆ ì  ê°œì„ ì 

1. **ì½”ë“œ í’ˆì§ˆ**
   - ì˜ˆì™¸ ì²˜ë¦¬ ê°•í™”
   - ë¡œê¹… ì‹œìŠ¤í…œ êµ¬ì¶•
   - ì½”ë“œ ë¦¬íŒ©í† ë§

2. **ì„±ëŠ¥ ìµœì í™”**
   - ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ ìµœì í™”
   - ìºì‹± ì‹œìŠ¤í…œ ë„ì…
   - ë¹„ë™ê¸° ì²˜ë¦¬ êµ¬í˜„

3. **í™•ì¥ì„±**
   - ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜ ê³ ë ¤
   - API ë¬¸ì„œí™”
   - í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„±

### 3-3. í–¥í›„ ê°œë°œ ë°©í–¥

1. **ê¸°ëŠ¥ í™•ì¥**
   - í™”ìƒ ë©´ì ‘ ê¸°ëŠ¥
   - ì‹¤ì‹œê°„ ì±„íŒ… (WebSocket)
   - ëª¨ë°”ì¼ ì•± ê°œë°œ

2. **ê¸°ìˆ  ìŠ¤íƒ ì—…ê·¸ë ˆì´ë“œ**
   - Spring Boot ìµœì‹  ë²„ì „ ì ìš©
   - React/Vue.js í”„ë¡ íŠ¸ì—”ë“œ ë¶„ë¦¬
   - Docker ì»¨í…Œì´ë„ˆí™”

3. **ìš´ì˜ í™˜ê²½ êµ¬ì¶•**
   - CI/CD íŒŒì´í”„ë¼ì¸ êµ¬ì¶•
   - ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ë„ì…
   - ë°±ì—… ë° ë³µêµ¬ ì‹œìŠ¤í…œ

### 3-4. í”„ë¡œì íŠ¸ í‰ê°€

**ì¥ì :**
âœ… AI ê¸°ìˆ ì„ í™œìš©í•œ í˜ì‹ ì ì¸ ë©´ì ‘ í”Œë«í¼
âœ… Spring Boot í‘œì¤€ ì•„í‚¤í…ì²˜ë¡œ ì•ˆì •ì„± í™•ë³´
âœ… ë³´ì•ˆ ê°•í™”ë¡œ ì‚¬ìš©ì ë°ì´í„° ë³´í˜¸
âœ… í™•ì¥ ê°€ëŠ¥í•œ êµ¬ì¡°ë¡œ ìœ ì§€ë³´ìˆ˜ì„± í–¥ìƒ

**ê°œì„ ì :**
âš ï¸ ì˜ˆì™¸ ì²˜ë¦¬ ê°•í™” í•„ìš”
âš ï¸ ì„±ëŠ¥ ìµœì í™” í•„ìš”
âš ï¸ í…ŒìŠ¤íŠ¸ ì½”ë“œ ì‘ì„± í•„ìš”
âš ï¸ ë¬¸ì„œí™” ê°œì„  í•„ìš”

**ì „ì²´ í‰ê°€:**
ì´ í”„ë¡œì íŠ¸ëŠ” AI ê¸°ìˆ ì„ í™œìš©í•œ í˜„ëŒ€ì ì¸ ë©´ì ‘ í”Œë«í¼ìœ¼ë¡œ, 
Spring Bootì˜ í‘œì¤€ ì•„í‚¤í…ì²˜ë¥¼ ì˜ í™œìš©í•˜ì—¬ ì•ˆì •ì ì´ê³  í™•ì¥ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œì„ êµ¬ì¶•í–ˆìŠµë‹ˆë‹¤.
ë‹¤ì–‘í•œ ì˜¤ë¥˜ ìƒí™©ì„ ê²½í—˜í•˜ë©´ì„œë„ í•´ê²°ì±…ì„ ì°¾ì•„ êµ¬í˜„í•œ ì ì´ ì¸ìƒì ì´ë©°,
í–¥í›„ ì§€ì†ì ì¸ ê°œì„ ê³¼ í™•ì¥ì„ í†µí•´ ë”ìš± ì™„ì„±ë„ ë†’ì€ ì„œë¹„ìŠ¤ë¡œ ë°œì „í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

================================================================================ 